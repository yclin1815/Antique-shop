{"version":3,"sources":["webpack:///./src/views/DashboardLayout.vue?511b","webpack:///./src/views/DashboardLayout.vue?39de","webpack:///src/views/DashboardLayout.vue","webpack:///./src/views/DashboardLayout.vue?0a6c","webpack:///./src/views/DashboardLayout.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","isLoading","on","$event","staticClass","_v","preventDefault","logout","_m","_e","staticRenderFns","name","data","token","checkSuccess","methods","vm","$store","dispatch","$http","method","url","headers","authorization","document","cookie","icon","title","msg","$router","push","checkLogin","replace","post","res","success","defaults","common","Authorization","computed","created","component"],"mappings":"gHAAA,W,kECAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,UAAU,CAACE,MAAM,CAAC,OAASN,EAAIO,UAAU,gBAAe,GAAMC,GAAG,CAAC,gBAAgB,SAASC,GAAQT,EAAIO,UAAUE,MAAWL,EAAG,MAAM,CAACM,YAAY,yCAAyC,CAACN,EAAG,cAAc,CAACM,YAAY,oBAAoBJ,MAAM,CAAC,GAAK,MAAM,CAACN,EAAIW,GAAG,YAAYP,EAAG,MAAM,CAACM,YAAY,uCAAuC,CAACN,EAAG,IAAI,CAACM,YAAY,WAAWJ,MAAM,CAAC,KAAO,KAAKE,GAAG,CAAC,MAAQ,SAASC,GAAgC,OAAxBA,EAAOG,iBAAwBZ,EAAIa,YAAY,CAACb,EAAIW,GAAG,UAAUX,EAAIc,GAAG,IAAI,GAAGV,EAAG,MAAM,CAACM,YAAY,mBAAmB,CAACN,EAAG,MAAM,CAACM,YAAY,OAAO,CAACN,EAAG,MAAM,CAACM,YAAY,gDAAgDJ,MAAM,CAAC,GAAK,YAAY,CAACF,EAAG,KAAK,CAACM,YAAY,oBAAoB,CAACV,EAAIW,GAAG,UAAUP,EAAG,KAAK,CAACM,YAAY,wBAAwB,CAACN,EAAG,KAAK,CAACM,YAAY,YAAY,CAACN,EAAG,cAAc,CAACM,YAAY,WAAWJ,MAAM,CAAC,GAAK,0BAA0B,CAACF,EAAG,IAAI,CAACM,YAAY,mBAAmBV,EAAIW,GAAG,aAAa,GAAGP,EAAG,KAAK,CAACM,YAAY,YAAY,CAACN,EAAG,cAAc,CAACM,YAAY,WAAWJ,MAAM,CAAC,GAAK,wBAAwB,CAACF,EAAG,IAAI,CAACM,YAAY,oBAAoBV,EAAIW,GAAG,aAAa,GAAGP,EAAG,KAAK,CAACM,YAAY,YAAY,CAACN,EAAG,cAAc,CAACM,YAAY,WAAWJ,MAAM,CAAC,GAAK,yBAAyB,CAACF,EAAG,IAAI,CAACM,YAAY,sBAAsBV,EAAIW,GAAG,cAAc,GAAGP,EAAG,KAAK,CAACM,YAAY,YAAY,CAACN,EAAG,cAAc,CAACM,YAAY,WAAWJ,MAAM,CAAC,GAAK,0BAA0B,CAACF,EAAG,IAAI,CAACM,YAAY,iBAAiBV,EAAIW,GAAG,aAAa,KAAKP,EAAG,KAAK,CAACM,YAAY,oBAAoB,CAACV,EAAIW,GAAG,UAAUP,EAAG,KAAK,CAACM,YAAY,mBAAmB,CAACN,EAAG,KAAK,CAACM,YAAY,YAAY,CAACN,EAAG,cAAc,CAACM,YAAY,WAAWJ,MAAM,CAAC,GAAK,MAAM,CAACF,EAAG,IAAI,CAACM,YAAY,iBAAiBV,EAAIW,GAAG,gBAAgB,OAAOP,EAAG,OAAO,CAACM,YAAY,0BAA0B,CAAEV,EAAgB,aAAEI,EAAG,eAAeJ,EAAIe,MAAM,QAAQ,IACz5DC,EAAkB,CAAC,WAAa,IAAIhB,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,SAAS,CAACM,YAAY,2BAA2BJ,MAAM,CAAC,KAAO,SAAS,cAAc,WAAW,cAAc,WAAW,gBAAgB,UAAU,gBAAgB,QAAQ,aAAa,sBAAsB,CAACF,EAAG,OAAO,CAACM,YAAY,4B,8CC8DpV,GACEO,KAAM,kBACNC,KAFF,WAGI,MAAO,CACLC,MAAO,GACPC,cAAc,IAGlBC,QAAS,CACPR,OADJ,WAEM,IAAN,OACA,0BACA,iDACA,MAEMS,EAAGC,OAAOC,SAAS,iBAAiB,EAAM,CAAhD,UACMF,EAAGG,MAAM,CACPC,OAAQ,OACRC,IAAK,GAAb,gEACQT,KAAM,CAAd,aACQU,QAAS,CACPC,cAAe,UAAzB,aAEA,iBAEQC,SAASC,OAAS,4BAClBT,EAAGF,cAAe,EAClBE,EAAGC,OAAOC,SAAS,iBAAiB,EAAO,CAAnD,UACQ,IAAR,GACUQ,KAAM,UACNC,MAAO,QAETX,EAAGC,OAAOC,SAAS,gCAAiCU,GAEpDZ,EAAGa,QAAQC,KAAK,cAGpBC,WA7BJ,WA8BM,IAAN,OACA,oEACMf,EAAGH,MAAQW,SAASC,OAAOO,QACjC,iDACA,MAEMhB,EAAGC,OAAOC,SAAS,iBAAiB,EAAM,CAAhD,UACMF,EAAGG,MAAMc,KAAKZ,EAAK,CAAzB,sCACQ,IAAKa,EAAItB,KAAKuB,QAAS,CACrB,IAAV,GACYT,KAAM,QACNC,MAAO,QAETX,EAAGC,OAAOC,SAAS,gCAAiCU,GACpDZ,EAAGa,QAAQC,KAAK,UAElBd,EAAGF,cAAe,EAClBE,EAAGG,MAAMiB,SAASd,QAAQe,OAAOC,cAAgB,UAAzD,gBACQtB,EAAGC,OAAOC,SAAS,iBAAiB,EAAO,CAAnD,eAIEqB,SAAU,OAAZ,OAAY,CAAZ,GACA,+BAEEC,QA/DF,WAgEI7C,KAAKoC,eC/HgV,I,wBCQrVU,EAAY,eACd,EACAhD,EACAiB,GACA,EACA,KACA,WACA,MAIa,aAAA+B,E","file":"js/chunk-ea7de36e.947c0160.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DashboardLayout.vue?vue&type=style&index=0&id=b71c6468&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('loading',{attrs:{\"active\":_vm.isLoading,\"is-full-page\":true},on:{\"update:active\":function($event){_vm.isLoading=$event}}}),_c('nav',{staticClass:\"navbar sticky-top navbar-dark bg-dark\"},[_c('router-link',{staticClass:\"navbar-brand logo\",attrs:{\"to\":\"/\"}},[_vm._v(\"Adagio\")]),_c('div',{staticClass:\"navbar-nav ml-auto d-none d-md-flex\"},[_c('a',{staticClass:\"nav-link\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.logout()}}},[_vm._v(\"登出\")])]),_vm._m(0)],1),_c('div',{staticClass:\"container-fluid\"},[_c('div',{staticClass:\"row\"},[_c('nav',{staticClass:\"col-md-3 col-lg-2 d-md-block collapse sidebar\",attrs:{\"id\":\"sidebar\"}},[_c('h6',{staticClass:\"sidebar-subtitle\"},[_vm._v(\"管理系統\")]),_c('ul',{staticClass:\"nav flex-column mb-4\"},[_c('li',{staticClass:\"nav-item\"},[_c('router-link',{staticClass:\"nav-link\",attrs:{\"to\":\"/admin/productsmanage\"}},[_c('i',{staticClass:\"fas fa-archive\"}),_vm._v(\" 產品管理 \")])],1),_c('li',{staticClass:\"nav-item\"},[_c('router-link',{staticClass:\"nav-link\",attrs:{\"to\":\"/admin/ordersmanage\"}},[_c('i',{staticClass:\"far fa-list-alt\"}),_vm._v(\" 訂單管理 \")])],1),_c('li',{staticClass:\"nav-item\"},[_c('router-link',{staticClass:\"nav-link\",attrs:{\"to\":\"/admin/couponsmanage\"}},[_c('i',{staticClass:\"fas fa-money-bill\"}),_vm._v(\" 優惠劵管理 \")])],1),_c('li',{staticClass:\"nav-item\"},[_c('router-link',{staticClass:\"nav-link\",attrs:{\"to\":\"/admin/storagesmanage\"}},[_c('i',{staticClass:\"fas fa-image\"}),_vm._v(\" 圖片管理 \")])],1)]),_c('h6',{staticClass:\"sidebar-subtitle\"},[_vm._v(\"電商首頁\")]),_c('ul',{staticClass:\"nav flex-column\"},[_c('li',{staticClass:\"nav-item\"},[_c('router-link',{staticClass:\"nav-link\",attrs:{\"to\":\"/\"}},[_c('i',{staticClass:\"fas fa-store\"}),_vm._v(\" Antique \")])],1)])]),_c('main',{staticClass:\"col-md-9 col-lg-10 p-4\"},[(_vm.checkSuccess)?_c('router-view'):_vm._e()],1)])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"navbar-toggler d-md-none\",attrs:{\"type\":\"button\",\"data-toggle\":\"collapse\",\"data-target\":\"#sidebar\",\"aria-controls\":\"sidebar\",\"aria-expanded\":\"false\",\"aria-label\":\"Toggle navigation\"}},[_c('span',{staticClass:\"navbar-toggler-icon\"})])}]\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <loading :active.sync=\"isLoading\" :is-full-page=\"true\"></loading>\n    <nav class=\"navbar sticky-top navbar-dark bg-dark\">\n      <router-link to=\"/\" class=\"navbar-brand logo\">Adagio</router-link>\n      <div class=\"navbar-nav ml-auto d-none d-md-flex\">\n        <a href=\"#\" class=\"nav-link\" @click.prevent=\"logout()\">登出</a>\n      </div>\n      <button class=\"navbar-toggler d-md-none\" type=\"button\" data-toggle=\"collapse\" data-target=\"#sidebar\" aria-controls=\"sidebar\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n        <span class=\"navbar-toggler-icon\"></span>\n      </button>\n    </nav>\n    <div class=\"container-fluid\">\n      <div class=\"row\">\n        <nav id=\"sidebar\" class=\"col-md-3 col-lg-2 d-md-block collapse sidebar\">\n          <h6 class=\"sidebar-subtitle\">管理系統</h6>\n          <ul class=\"nav flex-column mb-4\">\n            <li class=\"nav-item\">\n              <router-link to=\"/admin/productsmanage\" class=\"nav-link\">\n                <i class=\"fas fa-archive\"></i>\n                產品管理\n              </router-link>\n            </li>\n            <li class=\"nav-item\">\n              <router-link to=\"/admin/ordersmanage\" class=\"nav-link\">\n                <i class=\"far fa-list-alt\"></i>\n                訂單管理\n              </router-link>\n            </li>\n            <li class=\"nav-item\">\n              <router-link to=\"/admin/couponsmanage\" class=\"nav-link\">\n                <i class=\"fas fa-money-bill\"></i>\n                優惠劵管理\n              </router-link>\n            </li>\n            <li class=\"nav-item\">\n              <router-link to=\"/admin/storagesmanage\" class=\"nav-link\">\n                <i class=\"fas fa-image\"></i>\n                圖片管理\n              </router-link>\n            </li>\n          </ul>\n          <h6 class=\"sidebar-subtitle\">電商首頁</h6>\n          <ul class=\"nav flex-column\">\n            <li class=\"nav-item\">\n              <router-link to=\"/\" class=\"nav-link\">\n                <i class=\"fas fa-store\"></i>\n                Antique\n              </router-link>\n            </li>\n          </ul>\n        </nav>\n        <main class=\"col-md-9 col-lg-10 p-4\">\n          <router-view v-if=\"checkSuccess\"/>\n        </main>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\n\nexport default {\n  name: 'DashboardLayout',\n  data () {\n    return {\n      token: '',\n      checkSuccess: false\n    }\n  },\n  methods: {\n    logout () {\n      const vm = this\n      const token = document.cookie.replace(\n        /(?:(?:^|.*;\\s*)hexToken\\s*=\\s*([^;]*).*$)|^.*$/,\n        '$1'\n      )\n      vm.$store.dispatch('updateLoading', true, { root: true })\n      vm.$http({\n        method: 'post',\n        url: `${process.env.VUE_APP_APIPATH}/auth/logout`,\n        data: { api_token: token },\n        headers: {\n          authorization: `Bearer ${token}`\n        }\n      }).then(() => {\n        // 清空 cookie\n        document.cookie = 'hexToken=;expires=;path=/'\n        vm.checkSuccess = false\n        vm.$store.dispatch('updateLoading', false, { root: true })\n        const msg = {\n          icon: 'success',\n          title: '登出成功'\n        }\n        vm.$store.dispatch('alertMessageModules/openToast', msg)\n\n        vm.$router.push('/login')\n      })\n    },\n    checkLogin () {\n      const vm = this\n      const url = `${process.env.VUE_APP_APIPATH}/auth/check`\n      vm.token = document.cookie.replace(\n        /(?:(?:^|.*;\\s*)hexToken\\s*=\\s*([^;]*).*$)|^.*$/,\n        '$1'\n      )\n      vm.$store.dispatch('updateLoading', true, { root: true })\n      vm.$http.post(url, { api_token: vm.token }).then((res) => {\n        if (!res.data.success) {\n          const msg = {\n            icon: 'error',\n            title: '出現錯誤'\n          }\n          vm.$store.dispatch('alertMessageModules/openToast', msg)\n          vm.$router.push('/login')\n        }\n        vm.checkSuccess = true\n        vm.$http.defaults.headers.common.Authorization = `Bearer ${vm.token}`\n        vm.$store.dispatch('updateLoading', false, { root: true })\n      })\n    }\n  },\n  computed: {\n    ...mapGetters(['isLoading'])\n  },\n  created () {\n    this.checkLogin()\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"@/assets/scss/all\";\n\n.sidebar {\n  padding: 1.5rem 0;\n  background-color: $light;\n  @include pad {\n    min-height: calc(100vh - 3.5rem);\n  }\n}\n\n.nav {\n  text-align: center;\n  @include pad {\n    text-align: left;\n  }\n  .nav-link {\n    color: $dark;\n    &.active {\n      color: $success;\n    }\n  }\n}\n\n.sidebar-subtitle {\n  display: flex;\n  justify-content: center;\n  padding: 0 1rem;\n  color: $primary;\n  @include pad {\n    justify-content: space-between;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DashboardLayout.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DashboardLayout.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DashboardLayout.vue?vue&type=template&id=b71c6468&scoped=true&\"\nimport script from \"./DashboardLayout.vue?vue&type=script&lang=js&\"\nexport * from \"./DashboardLayout.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DashboardLayout.vue?vue&type=style&index=0&id=b71c6468&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b71c6468\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}