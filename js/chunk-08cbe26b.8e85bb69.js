(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-08cbe26b"],{1799:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",{attrs:{"aria-label":"Page navigation"}},[a("ul",{staticClass:"pagination justify-content-center"},[a("li",{staticClass:"page-item",class:{disabled:1===t.pagination.current_page}},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(e){return e.preventDefault(),t.changePage(t.pagination.current_page-1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.pagination.total_pages,(function(e){return a("li",{key:e,staticClass:"page-item",class:{active:e===t.pagination.current_page}},[a("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.changePage(e)}}},[t._v(" "+t._s(e)+" ")])])})),a("li",{staticClass:"page-item",class:{disabled:t.pagination.current_page===t.pagination.total_pages}},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(e){return e.preventDefault(),t.changePage(t.pagination.current_page+1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])])},r=[],s=a("5530"),n=a("2f62"),c={methods:{changePage:function(t){this.$emit("get-data",t)}},computed:Object(s["a"])({},Object(n["c"])("paginationModules",["pagination"]))},o=c,l=a("2877"),u=Object(l["a"])(o,i,r,!1,null,null,null);e["a"]=u.exports},"18f3":function(t,e,a){"use strict";a("ddfb")},b0c0:function(t,e,a){var i=a("83ab"),r=a("9bf2").f,s=Function.prototype,n=s.toString,c=/^\s*function ([^ (]*)/,o="name";i&&!(o in s)&&r(s,o,{configurable:!0,get:function(){try{return n.call(this).match(c)[1]}catch(t){return""}}})},ddfb:function(t,e,a){},ed84:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"products-wrap"},[a("div",{staticClass:"pagebanner",style:{backgroundImage:"url("+t.categoryImg+")"}}),a("div",{staticClass:"container-fluid products"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 col-md-5 col-lg-3"},[a("div",{staticClass:"categories"},[a("h3",{staticClass:"categories-title"},[t._v("產品分類")]),a("ul",{staticClass:"categories-list"},t._l(t.categories,(function(e){return a("li",{key:e.key,class:{active:e.title===t.filterCategory}},[a("a",{staticClass:"categories-link",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.getCategory(e)}}},[t._v(" "+t._s(e.title)+" ")])])})),0)]),a("div",{staticClass:"input-group search-inputgroup"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.searchText,expression:"searchText",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入搜尋商品"},domProps:{value:t.searchText},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search()},input:function(e){e.target.composing||(t.searchText=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-dark rounded-right",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.search()}}},[t._v(" 搜尋 ")])])])]),a("div",{staticClass:"col-12 col-md-7 col-lg-9"},[t.filterText?a("div",{staticClass:"products-info"},[t._v(" 搜尋到 "+t._s(t.filterData.length)+' 筆 "'+t._s(t.filterText)+'" 資料 ')]):t._e(),a("div",{staticClass:"row"},t._l(t.filterData,(function(e){return a("div",{key:e.id,staticClass:"col-12 col-lg-6 col-xl-4"},[a("router-link",{staticClass:"card",attrs:{to:"/products/"+e.id}},[a("div",{staticClass:"card-head"},[a("div",{staticClass:"card-img-wrap"},[a("span",{staticClass:"card-img",style:{backgroundImage:"url("+e.imageUrl[0]+")"}})]),a("div",{staticClass:"card-category"},[t._v(t._s(e.category))]),a("a",{directives:[{name:"show",rawName:"v-show",value:e.isFavorite,expression:"product.isFavorite"}],staticClass:"favorite-icon",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.delFavoriteItem(e)}}},[a("i",{staticClass:"fas fa-heart"})]),a("a",{directives:[{name:"show",rawName:"v-show",value:!e.isFavorite,expression:"!product.isFavorite"}],staticClass:"favorite-icon",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.addFavorite(e)}}},[a("i",{staticClass:"far fa-heart"})])]),a("div",{staticClass:"card-body text-center"},[a("h4",{staticClass:"card-title"},[t._v(t._s(e.title))]),e.origin_price===e.price?a("ul",{staticClass:"card-price"},[a("li",{staticClass:"price"},[t._v(" 售價： "+t._s(t._f("currency")(e.origin_price))+" ")])]):a("ul",{staticClass:"card-price"},[a("li",{staticClass:"price price-through"},[t._v(" 售價： "+t._s(t._f("currency")(e.origin_price))+" ")]),a("li",{staticClass:"price"},[t._v(" 特價： "+t._s(t._f("currency")(e.price))+" ")])]),a("a",{staticClass:"btn btn-dark btn-sm card-btn",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.updateCartItem(e.id,1)}}},[a("span",{staticClass:"mr-1"},[a("i",{staticClass:"fas fa-shopping-basket"})]),t._v(" 放入購物車 ")])])])],1)})),0),a("div",{staticClass:"products-pagination"},[a("Pagination",{on:{"get-data":t.changePage}})],1)])])])])},r=[],s=a("5530"),n=(a("b0c0"),a("4de4"),a("a9e3"),a("159b"),a("2f62")),c=a("1799"),o={name:"Products",data:function(){return{searchText:"",filterText:"",filterCategory:"全部商品"}},methods:Object(s["a"])({updateCartItem:function(t,e){this.$store.dispatch("cartModules/updateCartItem",{id:t,num:e,method:"add"})},getData:function(){var t=this,e=this.$route.query.categoryName;this.$store.dispatch("favoriteModules/getFavorites").then((function(){return t.$store.dispatch("productsModules/getProducts",{routerName:t.$route.name})})).then((function(){e?t.getCategory({title:e}):t.$store.dispatch("paginationModules/getPagination",{routerName:t.$route.name,data:t.products})}))},addFavorite:function(t){var e=this;this.$store.dispatch("favoriteModules/addFavorite",t).then((function(){e.$store.dispatch("productsModules/getProducts",{routerName:e.$route.name})}))},delFavoriteItem:function(t){var e=this;this.$store.dispatch("favoriteModules/delFavoriteItem",t).then((function(){e.$store.dispatch("productsModules/getProducts",{routerName:e.$route.name})}))},getCategory:function(t){var e=this;e.filterCategory=t.title,e.$store.dispatch("productsModules/updateCategoryImg",e.filterCategory),e.$store.dispatch("paginationModules/updatePagination",e.newProducts),e.filterText&&(e.filterText="")},search:function(){var t=this;if(t.searchText)t.filterCategory="全部商品",t.filterText=t.searchText,t.searchText="",t.$store.dispatch("paginationModules/updatePagination",t.newProducts);else{var e={title:"請輸入搜尋文字",text:"搜尋內容為空，請輸入搜尋文字",status:"danger"};t.$store.dispatch("alertMessageModules/openModal",e)}},changePage:function(t){this.$store.dispatch("paginationModules/updateCurrentPage",t)}},Object(n["b"])("cartModules",["getCarts"])),computed:Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])({newProducts:function(){var t=this;return t.filterText?(t.filterCategory="全部商品",t.products.filter((function(e){return-1!==e.title.indexOf(t.filterText)}))):"全部商品"!==t.filterCategory?t.products.filter((function(e){return e.category===t.filterCategory})):t.products},filterData:function(){var t=this,e=[],a=Number(t.pagination.perpage),i=Number(t.pagination.current_page),r=i*a-a+1,s=i*a;return t.newProducts.forEach((function(t,a){var i=a+1;i>=r&&i<=s&&e.push(t)})),e}},Object(n["c"])("cartModules",["carts"])),Object(n["c"])("productsModules",["products","categories","categoryImg"])),Object(n["c"])("favoriteModules",["favorites"])),Object(n["c"])("paginationModules",["pagination"])),components:{Pagination:c["a"]},created:function(){this.getData(),this.$store.dispatch("cartModules/getCarts")}},l=o,u=(a("18f3"),a("2877")),d=Object(u["a"])(l,i,r,!1,null,"5f986677",null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-08cbe26b.8e85bb69.js.map