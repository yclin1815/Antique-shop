(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b906263"],{"50ed":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"pagebanner pagebanner-img"}),a("div",{staticClass:"container checkorder"},[a("ul",{staticClass:"step"},[a("li",{staticClass:"step-item active",class:{"step-active":1===t.step}},[a("span",{staticClass:"d-block"},[t._v("STEP 1")]),t._v(" 確認購物清單 ")]),a("li",{staticClass:"step-item",class:{active:2===t.step||3===t.step,"step-active":2===t.step}},[a("span",{staticClass:"d-block"},[t._v("STEP 2")]),t._v(" 填寫訂購資料 ")]),a("li",{staticClass:"step-item",class:{active:3===t.step,"step-active":3===t.step}},[a("span",{staticClass:"d-block"},[t._v("STEP 3")]),t._v(" 付款/完成訂單 ")])]),1===t.step?a("div",[a("table",{staticClass:"table table-borderless checkorder-table"},[t._m(0),a("tbody",t._l(t.carts,(function(e){return a("tr",{key:e.product.id,staticClass:"border-bottom"},[a("td",{staticClass:"d-none d-md-table-cell text-center"},[a("span",{staticClass:"thumbnail",style:{backgroundImage:"url("+e.product.imageUrl[0]+")"}})]),a("td",{staticClass:"align-middle"},[t._v(" "+t._s(e.product.title)+" ")]),a("td",{staticClass:"d-none d-sm-table-cell align-middle text-center"},[a("div",{staticClass:"counter"},[a("a",{staticClass:"lessNum",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.updateCartItem(e.product.id,e.quantity-1,a)}}},[a("i",{staticClass:"fas fa-minus"})]),a("input",{staticClass:"counter-input",attrs:{type:"number",min:"1",readonly:"readonly"},domProps:{value:e.quantity}}),a("a",{staticClass:"addNum",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.updateCartItem(e.product.id,e.quantity+1,a)}}},[a("i",{staticClass:"fas fa-plus"})])])]),a("td",{staticClass:"d-none d-md-table-cell align-middle text-right"},[t._v(" "+t._s(t._f("currency")(e.product.origin_price))+" ")]),a("td",{staticClass:"d-none d-sm-table-cell align-middle text-right"},[t._v(" "+t._s(t._f("currency")(e.product.price))+" ")]),a("td",{staticClass:"align-middle text-center"},[a("a",{staticClass:"text-danger",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.delCartItem(e.product.id)}}},[a("i",{staticClass:"far fa-trash-alt"})])])])})),0),a("tfoot",{directives:[{name:"show",rawName:"v-show",value:t.cartNum,expression:"cartNum"}],staticClass:"bg-light table-borderless border-top"},[a("tr",[a("td",{staticClass:"d-none d-md-table-cell",attrs:{colspan:"2"}}),a("td",{staticClass:"d-none d-sm-table-cell"}),a("td",{staticClass:"d-none d-sm-table-cell text-right"},[t._v("共 "+t._s(t.cartNum)+" 件")]),a("td",{staticClass:"text-right"},[t._v("小計")]),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.totalMoney)))])]),t._m(1),a("tr",{directives:[{name:"show",rawName:"v-show",value:t.coupon.title,expression:"coupon.title"}],staticClass:"text-success"},[a("td",{staticClass:"d-none d-md-table-cell",attrs:{colspan:"2"}}),a("td",{staticClass:"d-none d-sm-table-cell text-right",attrs:{colspan:"2"}},[t._v(" 已套用折價卷 - ["+t._s(t.coupon.title)+"] ")]),a("td",{staticClass:"text-right"},[t._v("折扣")]),a("td",{staticClass:"text-right"},[t._v(" - "+t._s(t._f("currency")(t.totalMoney-t.totalMoney*t.coupon.percent/100))+" ")])]),a("tr",{class:{"text-success":t.coupon.title}},[a("td",{staticClass:"d-none d-md-table-cell",attrs:{colspan:"2"}}),a("td",{staticClass:"d-none d-sm-table-cell",attrs:{colspan:"2"}}),a("td",{staticClass:"text-right"},[t._v("總計")]),a("td",{directives:[{name:"show",rawName:"v-show",value:!t.coupon.title,expression:"!coupon.title"}],staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.totalMoney)))]),a("td",{directives:[{name:"show",rawName:"v-show",value:t.coupon.title,expression:"coupon.title"}],staticClass:"text-right"},[t._v(" "+t._s(t._f("currency")(t.totalMoney*t.coupon.percent/100))+" ")])])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.cartNum,expression:"!cartNum"}],staticClass:"text-center"},[a("h4",{staticClass:"h5 mb-4 text-muted"},[t._v("購物車內無商品")]),a("router-link",{staticClass:"btn btn-secondary btn-lg py-2",attrs:{to:"/products"}},[a("span",{staticClass:"mr-1"},[a("i",{staticClass:"far fa-hand-point-up fa-lg"})]),t._v(" 立即購物去 ")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.cartNum,expression:"cartNum"}],staticClass:"input-group mb-4 mb-xl-5"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.couponInput,expression:"couponInput",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入折價券代碼"},domProps:{value:t.couponInput},on:{input:function(e){e.target.composing||(t.couponInput=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-dark",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.getCoupon()}}},[t._v(" 使用折價券 ")])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.cartNum,expression:"cartNum"}],staticClass:"checkorder-btngroup"},[a("router-link",{staticClass:"btn btn-muted btn-lg mb-3 mb-md-0",attrs:{to:"/products"}},[a("span",{staticClass:"mr-1"},[a("i",{staticClass:"fas fa-arrow-alt-circle-left"})]),t._v(" 繼續購物 ")]),a("button",{staticClass:"btn btn-dark btn-lg",attrs:{type:"submut",disabled:!t.cartNum},on:{click:function(e){e.preventDefault(),t.step=2}}},[t._v(" 填寫資料 "),t._m(2)])],1)]):t._e(),2===t.step?a("div",[a("table",{staticClass:"table table-borderless checkorder-table mb-5"},[t._m(3),a("tbody",t._l(t.carts,(function(e){return a("tr",{key:e.product.id,staticClass:"border-bottom"},[a("td",{staticClass:"d-none d-md-table-cell text-center"},[a("span",{staticClass:"thumbnail-small",style:{backgroundImage:"url("+e.product.imageUrl[0]+")"}})]),a("td",{staticClass:"align-middle"},[t._v(" "+t._s(e.product.title)+" ")]),a("td",{staticClass:"align-middle text-center"},[t._v(" "+t._s(e.quantity)+" "+t._s(e.product.unit)+" ")]),a("td",{staticClass:"d-none d-md-table-cell align-middle text-right"},[t._v(" "+t._s(t._f("currency")(e.product.price*e.quantity))+" ")])])})),0),a("tfoot",{directives:[{name:"show",rawName:"v-show",value:t.cartNum,expression:"cartNum"}],staticClass:"bg-light table-borderless border-top"},[a("tr",{directives:[{name:"show",rawName:"v-show",value:t.coupon.title,expression:"coupon.title"}],staticClass:"text-success"},[a("td",{staticClass:"d-none d-md-table-cell text-right",attrs:{colspan:"2"}},[t._v(" 已使用折價劵 - ["+t._s(t.coupon.title)+"] ")]),a("td",{staticClass:"text-right"},[t._v("折扣")]),a("td",{staticClass:"text-right"},[t._v(" - "+t._s(t._f("currency")(t.totalMoney-t.totalMoney*t.coupon.percent/100))+" ")])]),a("tr",{class:{"text-success":t.coupon.title}},[a("td",{staticClass:"d-none d-md-table-cell",attrs:{colspan:"2"}}),a("td",{staticClass:"text-right"},[t._v("總計")]),a("td",{directives:[{name:"show",rawName:"v-show",value:!t.coupon.title,expression:"!coupon.title"}],staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.totalMoney)))]),a("td",{directives:[{name:"show",rawName:"v-show",value:t.coupon.title,expression:"coupon.title"}],staticClass:"text-right"},[t._v(" "+t._s(t._f("currency")(t.totalMoney*t.coupon.percent/100))+" ")])])])]),a("h2",{staticClass:"checkorder-title"},[t._v("訂購資料")]),a("ValidationObserver",{attrs:{tag:"form"},on:{submit:function(e){return e.preventDefault(),t.createOrder()}},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.invalid;return[a("div",{staticClass:"bg-light  mb-3 mb-md-5 p-4"},[a("div",{staticClass:"form-row"},[a("ValidationProvider",{staticClass:"form-group col-md-6",attrs:{name:"收件人姓名",rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.classes;return[a("label",{attrs:{for:"name"}},[a("span",{staticClass:"text-danger"},[t._v("*")]),t._v(" 收件人姓名： ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderData.name,expression:"orderData.name"}],staticClass:"form-control",class:r,attrs:{type:"text",id:"name",placeholder:"請輸入收件人姓名",required:""},domProps:{value:t.orderData.name},on:{input:function(e){e.target.composing||t.$set(t.orderData,"name",e.target.value)}}}),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}],null,!0)}),a("ValidationProvider",{staticClass:"form-group col-md-6",attrs:{name:"收件人電話",rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.classes;return[a("label",{attrs:{for:"tel"}},[a("span",{staticClass:"text-danger"},[t._v("*")]),t._v(" 收件人電話： ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderData.tel,expression:"orderData.tel"}],staticClass:"form-control",class:r,attrs:{type:"text",id:"tel",placeholder:"請輸入收件人電話",required:""},domProps:{value:t.orderData.tel},on:{input:function(e){e.target.composing||t.$set(t.orderData,"tel",e.target.value)}}}),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),a("ValidationProvider",{staticClass:"form-group",attrs:{name:"電子郵件",rules:"required|email",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.classes;return[a("label",{attrs:{for:"email"}},[a("span",{staticClass:"text-danger"},[t._v("*")]),t._v(" 電子郵件： ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderData.email,expression:"orderData.email"}],staticClass:"form-control",class:r,attrs:{type:"email",id:"email",placeholder:"請輸入電子郵件",required:""},domProps:{value:t.orderData.email},on:{input:function(e){e.target.composing||t.$set(t.orderData,"email",e.target.value)}}}),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}],null,!0)}),a("ValidationProvider",{staticClass:"form-group",attrs:{name:"收件地址",rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.classes;return[a("label",{attrs:{for:"address"}},[a("span",{staticClass:"text-danger"},[t._v("*")]),t._v(" 收件地址： ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderData.address,expression:"orderData.address"}],staticClass:"form-control",class:r,attrs:{type:"text",id:"address",placeholder:"請輸入收件地址",required:""},domProps:{value:t.orderData.address},on:{input:function(e){e.target.composing||t.$set(t.orderData,"address",e.target.value)}}}),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}],null,!0)}),a("ValidationProvider",{staticClass:"form-group",attrs:{name:"支付方式",rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.classes;return[a("label",{attrs:{for:"payment"}},[a("span",{staticClass:"text-danger"},[t._v("*")]),t._v(" 支付方式 ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.orderData.payment,expression:"orderData.payment"}],staticClass:"form-control",class:r,attrs:{id:"payment",name:"支付方式",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.orderData,"payment",e.target.multiple?a:a[0])}}},[a("option",{attrs:{selected:"selected",disabled:"",value:""}},[t._v("請選擇支付方式")]),a("option",{attrs:{value:"WebATM"}},[t._v("WebATM")]),a("option",{attrs:{value:"ATM"}},[t._v("ATM")]),a("option",{attrs:{value:"CVS"}},[t._v("CVS")]),a("option",{attrs:{value:"Barcode"}},[t._v("Barcode")]),a("option",{attrs:{value:"Credit"}},[t._v("Credit")]),a("option",{attrs:{value:"ApplePay"}},[t._v("ApplePay")]),a("option",{attrs:{value:"GooglePay"}},[t._v("GooglePay")])]),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}],null,!0)}),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"message"}},[t._v("備註：")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.orderData.message,expression:"orderData.message"}],staticClass:"form-control",attrs:{id:"message",rows:"3",placeholder:"留言給我們"},domProps:{value:t.orderData.message},on:{input:function(e){e.target.composing||t.$set(t.orderData,"message",e.target.value)}}})])],1),a("div",{staticClass:"checkorder-btngroup"},[a("button",{staticClass:"btn btn-muted btn-lg mb-3 mb-md-0",attrs:{type:"submut"},on:{click:function(e){e.preventDefault(),t.step=1}}},[a("span",{staticClass:"mr-1"},[a("i",{staticClass:"fas fa-arrow-alt-circle-left"})]),t._v(" 回上一步 ")]),a("button",{staticClass:"btn btn-dark btn-lg",attrs:{type:"submut",disabled:t.cartNum&&s}},[t._v(" 確認結帳 "),a("span",{staticClass:"ml-1"},[a("i",{staticClass:"fas fa-arrow-alt-circle-right"})])])])]}}],null,!1,4158621779)})],1):t._e()])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",{staticClass:"bg-dark text-light"},[a("th",{staticClass:"d-none d-md-table-cell text-center",attrs:{scope:"col"}},[t._v("縮圖")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("商品名稱")]),a("th",{staticClass:"d-none d-sm-table-cell text-center",attrs:{scope:"col"}},[t._v("數量")]),a("th",{staticClass:"d-none d-md-table-cell text-center",attrs:{scope:"col"}},[t._v("原價")]),a("th",{staticClass:"d-none d-sm-table-cell text-center",attrs:{scope:"col"}},[t._v("售價")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("刪除")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"d-none d-md-table-cell",attrs:{colspan:"2"}}),a("td",{staticClass:"d-none d-sm-table-cell",attrs:{colspan:"2"}}),a("td",{staticClass:"text-right"},[t._v("運費")]),a("td",{staticClass:"text-right"},[t._v("$0")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"ml-1"},[a("i",{staticClass:"fas fa-arrow-alt-circle-right"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",{staticClass:"bg-dark text-light"},[a("th",{staticClass:"pl-4",attrs:{colspan:"4"}},[t._v("購物清單")])])])}],o=a("5530"),l=(a("99af"),a("2f62")),c={name:"CreateOrder",data:function(){return{step:1,couponInput:"",coupon:{},isCreateOrderAllow:!0,orderData:{name:"",email:"",tel:"",address:"",payment:"",coupon:"",message:""}}},methods:Object(o["a"])({updateCartItem:function(t,e){if(e<=0){var a={icon:"error",title:"商品數量不可小於 1"};this.$store.dispatch("alertMessageModules/openToast",a)}else this.$store.dispatch("cartModules/updateCartItem",{id:t,num:e,method:"set"})},delCartItem:function(t){this.$store.dispatch("cartModules/delCartItem",t)},getCoupon:function(){var t=this,e="".concat("https://course-ec-api.hexschool.io/api","/").concat("bd65c2e1-90a0-48f8-a51f-dfe3857be113","/ec/coupon/search");if(t.$store.dispatch("updateLoading",!0,{root:!0}),t.coupon={},t.orderData.coupon="",t.couponInput)t.$http.post(e,{code:t.couponInput}).then((function(e){t.coupon=e.data.data,t.orderData.coupon=e.data.data.code,t.$store.dispatch("updateLoading",!1,{root:!0});var a={icon:"success",title:"已使用折價券"};t.$store.dispatch("alertMessageModules/openToast",a),t.couponInput=""})).catch((function(){t.$store.dispatch("updateLoading",!1,{root:!0});var e={icon:"error",title:"折價券無效"};t.$store.dispatch("alertMessageModules/openToast",e)}));else{t.$store.dispatch("updateLoading",!1,{root:!0});var a={title:"發生錯誤",text:"請輸入折價劵代碼",status:"danger"};t.$store.dispatch("alertMessageModules/openModal",a)}},createOrder:function(){var t=this,e="".concat("https://course-ec-api.hexschool.io/api","/").concat("bd65c2e1-90a0-48f8-a51f-dfe3857be113","/ec/orders");t.$store.dispatch("updateLoading",!0,{root:!0}),t.$http.post(e,t.orderData).then((function(e){t.$store.dispatch("updateLoading",!1,{root:!0});var a=e.data.data.id;t.$store.dispatch("cartModules/getCarts"),t.$swal({title:"已成立訂單",text:"訂單已成立，請繼續結帳",showCancelButton:!1,confirmButtonColor:"#28a745",allowOutsideClick:!1,confirmButtonText:"確認",customClass:{title:"swal-title swal-title-success"}}).then((function(){t.$router.push({name:"Order",params:{orderId:a}})}))})).catch((function(){t.$store.dispatch("updateLoading",!1,{root:!0});var e={title:"發生錯誤",text:"請重新訂購",status:"danger"};t.$store.dispatch("alertMessageModules/openModal",e)}))}},Object(l["b"])("cartModules",["getCarts"])),computed:Object(o["a"])({},Object(l["c"])("cartModules",["carts","cartNum","totalMoney"])),created:function(){this.$store.dispatch("cartModules/getCarts")}},i=c,n=(a("5f47"),a("2877")),d=Object(n["a"])(i,s,r,!1,null,"11fc7f88",null);e["default"]=d.exports},"5f47":function(t,e,a){"use strict";a("bf15")},bf15:function(t,e,a){}}]);
//# sourceMappingURL=chunk-1b906263.45b40e11.js.map