(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ea7de36e"],{3485:function(t,a,s){"use strict";s("3eb4")},"3eb4":function(t,a,s){},d72e:function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("loading",{attrs:{active:t.isLoading,"is-full-page":!0},on:{"update:active":function(a){t.isLoading=a}}}),s("nav",{staticClass:"navbar sticky-top navbar-dark bg-dark"},[s("router-link",{staticClass:"navbar-brand logo",attrs:{to:"/"}},[t._v("Adagio")]),s("div",{staticClass:"navbar-nav ml-auto d-none d-md-flex"},[s("a",{staticClass:"nav-link",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.logout()}}},[t._v("登出")])]),t._m(0)],1),s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row"},[s("nav",{staticClass:"col-md-3 col-lg-2 d-md-block collapse sidebar",attrs:{id:"sidebar"}},[s("h6",{staticClass:"sidebar-subtitle"},[t._v("管理系統")]),s("ul",{staticClass:"nav flex-column mb-4"},[s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:"/admin/productsmanage"}},[s("i",{staticClass:"fas fa-archive"}),t._v(" 產品管理 ")])],1),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:"/admin/ordersmanage"}},[s("i",{staticClass:"far fa-list-alt"}),t._v(" 訂單管理 ")])],1),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:"/admin/couponsmanage"}},[s("i",{staticClass:"fas fa-money-bill"}),t._v(" 優惠劵管理 ")])],1),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:"/admin/storagesmanage"}},[s("i",{staticClass:"fas fa-image"}),t._v(" 圖片管理 ")])],1)]),s("h6",{staticClass:"sidebar-subtitle"},[t._v("電商首頁")]),s("ul",{staticClass:"nav flex-column"},[s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:"/"}},[s("i",{staticClass:"fas fa-store"}),t._v(" Antique ")])],1)])]),s("main",{staticClass:"col-md-9 col-lg-10 p-4"},[t.checkSuccess?s("router-view"):t._e()],1)])])],1)},i=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("button",{staticClass:"navbar-toggler d-md-none",attrs:{type:"button","data-toggle":"collapse","data-target":"#sidebar","aria-controls":"sidebar","aria-expanded":"false","aria-label":"Toggle navigation"}},[s("span",{staticClass:"navbar-toggler-icon"})])}],o=s("5530"),n=(s("5319"),s("ac1f"),s("2f62")),c={name:"DashboardLayout",data:function(){return{token:"",checkSuccess:!1}},methods:{logout:function(){var t=this,a=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");t.$store.dispatch("updateLoading",!0,{root:!0}),t.$http({method:"post",url:"".concat("https://course-ec-api.hexschool.io/api","/auth/logout"),data:{api_token:a},headers:{authorization:"Bearer ".concat(a)}}).then((function(){document.cookie="hexToken=;expires=;path=/",t.checkSuccess=!1,t.$store.dispatch("updateLoading",!1,{root:!0});var a={icon:"success",title:"登出成功"};t.$store.dispatch("alertMessageModules/openToast",a),t.$router.push("/login")}))},checkLogin:function(){var t=this,a="".concat("https://course-ec-api.hexschool.io/api","/auth/check");t.token=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1"),t.$store.dispatch("updateLoading",!0,{root:!0}),t.$http.post(a,{api_token:t.token}).then((function(a){if(!a.data.success){var s={icon:"error",title:"出現錯誤"};t.$store.dispatch("alertMessageModules/openToast",s),t.$router.push("/login")}t.checkSuccess=!0,t.$http.defaults.headers.common.Authorization="Bearer ".concat(t.token),t.$store.dispatch("updateLoading",!1,{root:!0})}))}},computed:Object(o["a"])({},Object(n["c"])(["isLoading"])),created:function(){this.checkLogin()}},r=c,l=(s("3485"),s("2877")),u=Object(l["a"])(r,e,i,!1,null,"b71c6468",null);a["default"]=u.exports}}]);
//# sourceMappingURL=chunk-ea7de36e.947c0160.js.map